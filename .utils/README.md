
# è„šæœ¬ä¹‹å®¶

è¿™é‡Œå­˜æ¡£äº† vault ä¸­ä½¿ç”¨åˆ°çš„è„šæœ¬ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ Featureï¼š

- æ‰¹é‡å¤„ç† draft å±æ€§ï¼š`251109-add-draft-properties.py`
- æ•°æ®æŸ¥è¯¢ç»Ÿè®¡å·¥å…·ï¼ˆTODOï¼‰ï¼š`250706-obsidiantools-query-data.py`
- æ—¥è®°å¯¼èˆªæ ï¼š`250629-format-journal-navigation.py`
- å‘å¸ƒå„å¹³å°æ‹‰å–æºï¼š`250619-sync-publish.py`
- æ•°æ®è¿ç§»ï¼Œä» HTML è½¬åŒ–ä¸º Markdownï¼š`250405-singlefile-raindrop-converter.py`
- Logseq æ•°æ®è¿ç§»ï¼Œè§£æ Logseq æ ‘å½¢æ–‡ä»¶ï¼Œè¾“å‡ºå…·ä½“æ–‡ä»¶ï¼š`250404-logseq-migration.py`

## å¤„ç†è‰ç¨¿

è¿™ä¸ªè„šæœ¬ç”¨äºç»™ vault ä¸­æ‰€æœ‰çš„ markdown æ–‡ä»¶çš„ frontmatter æ·»åŠ  `draft: true` å±æ€§ã€‚

### è„šæœ¬åšä»€ä¹ˆï¼š

1. âœ… éå†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ markdown æ–‡ä»¶ï¼ˆ`.md` ç»“å°¾ï¼‰
2. âœ… ä¸ºæ¯ä¸ªæ–‡ä»¶çš„ frontmatter æ·»åŠ  `draft: true` å±æ€§
3. âœ… å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ `draft` å±æ€§ï¼Œåˆ™è·³è¿‡è¯¥æ–‡ä»¶
4. âœ… å¦‚æœæ–‡ä»¶æ²¡æœ‰ frontmatterï¼Œåˆ™åˆ›å»ºæ–°çš„ frontmatter
5. âœ… æ˜¾ç¤ºå¤„ç†è¿›åº¦æ¡å’Œè¯¦ç»†æ—¥å¿—
6. âœ… æ’é™¤éšè—ç›®å½•ï¼ˆä»¥ `.` å¼€å¤´çš„ç›®å½•ï¼‰


### å¤„ç†é€»è¾‘

1. **æå– Frontmatter**ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå– `---` åŒ…å›´çš„ YAML éƒ¨åˆ†
2. **æ£€æŸ¥ draft å±æ€§**ï¼šå¦‚æœå·²ç»å­˜åœ¨ `draft` å±æ€§ï¼Œåˆ™è·³è¿‡
3. **æ·»åŠ å±æ€§**ï¼šå°† `draft: true` æ·»åŠ åˆ° frontmatter çš„å¼€å¤´
4. **åˆ›å»º Frontmatter**ï¼šå¦‚æœæ–‡ä»¶æ²¡æœ‰ frontmatterï¼Œåˆ™åˆ›å»ºæ–°çš„

### è¿›åº¦æ˜¾ç¤º

è„šæœ¬å®ç°äº†ä¸€ä¸ªä¸ä¾èµ–å¤–éƒ¨åº“çš„è¿›åº¦æ¡ï¼Œæ˜¾ç¤ºï¼š

- å½“å‰å¤„ç†æ•° / æ€»æ–‡ä»¶æ•°
- ç™¾åˆ†æ¯”å®Œæˆåº¦
- è¿›åº¦æ¡è§†è§‰è¡¨ç¤º

### æ— å¤–éƒ¨ä¾èµ–

è„šæœ¬åªä½¿ç”¨ Python æ ‡å‡†åº“ï¼Œæ— éœ€å®‰è£…é¢å¤–çš„åŒ…ï¼š

- `os`, `re`, `sys`, `time`
- `pathlib.Path`
- `typing`

### é”™è¯¯å¤„ç†

è„šæœ¬ä¼šæ•è·æ–‡ä»¶å¤„ç†è¿‡ç¨‹ä¸­çš„å¼‚å¸¸ï¼Œå¹¶ï¼š

- è®°å½•é”™è¯¯æ¶ˆæ¯
- ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªæ–‡ä»¶
- åœ¨æœ€åæ˜¾ç¤ºé”™è¯¯æ‘˜è¦ï¼ˆæœ€å¤šæ˜¾ç¤º 10 ä¸ªé”™è¯¯ï¼‰

### å¤‡ä»½å»ºè®®

åœ¨è¿è¡Œè„šæœ¬å‰ï¼Œå»ºè®®ï¼š

1. æäº¤å½“å‰çš„ git æ”¹åŠ¨ï¼š`git add . && git commit -m "backup before adding draft"`
2. æˆ–è€…åˆ›å»ºæ–‡ä»¶å¤‡ä»½
3. è„šæœ¬å®Œæˆåæ£€æŸ¥ git diff ç¡®ä¿æ”¹åŠ¨ç¬¦åˆé¢„æœŸ


### å¸¸ç”¨å‘½ä»¤

```bash
# æ–¹æ³• 1ï¼šä¸ºæ•´ä¸ª vault æ·»åŠ  draft: true
python3 .utils/251109-add-draft-properties.py

# æ–¹æ³• 2ï¼šåªå¤„ç† ./projects æ–‡ä»¶å¤¹
python3 .utils/251109-add-draft-properties.py --folder ./projects

# æ–¹æ³• 3ï¼šå°†æŸæ–‡ä»¶å¤¹è®¾ç½®ä¸ºå·²å‘å¸ƒï¼ˆdraft: falseï¼‰
python3 .utils/251109-add-draft-properties.py --folder ./published --draft false --force

# æ–¹æ³• 4ï¼šå¼ºåˆ¶æ›´æ–°æ‰€æœ‰æ–‡ä»¶ä¸º draft: false
python3 .utils/251109-add-draft-properties.py --draft false --force
```

### å‚æ•°è¡¨

| å‚æ•° | å€¼ | è¯´æ˜ |
|-----|-----|------|
| `--folder` | æ–‡ä»¶å¤¹è·¯å¾„ | æŒ‡å®šå¤„ç†çš„ç›®å½•ï¼ˆç›¸å¯¹æˆ–ç»å¯¹ï¼‰|
| `--draft` | `true`\|`false` | è®¾ç½® draft å€¼ï¼Œé»˜è®¤ true |
| `--force` | æ— å€¼ | å¼ºåˆ¶æ›´æ–°å·²å­˜åœ¨çš„ draft |
| `--include-hidden` | æ— å€¼ | åŒ…å«éšè—ç›®å½• |
| `--help` | æ— å€¼ | æ˜¾ç¤ºå¸®åŠ© |


### åœºæ™¯ 1ï¼šå¯¼å…¥æ–°æ–‡ä»¶ï¼Œæ ‡è®°ä¸ºè‰ç¨¿
```bash
python3 .utils/251109-add-draft-properties.py --folder ./inbox
```

### åœºæ™¯ 2ï¼šå‘å¸ƒä¸€ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ–‡ç« 
```bash
python3 .utils/251109-add-draft-properties.py --folder ./blog/2024 --draft false --force
```

### åœºæ™¯ 3ï¼šé‡æ–°æ ‡è®°æŸä¸ªç±»åˆ«ä¸ºè‰ç¨¿
```bash
python3 .utils/251109-add-draft-properties.py --folder ./drafts --draft true --force
```

### åœºæ™¯ 4ï¼šæ‰«ææ•´ä¸ª vaultï¼Œæ·»åŠ ç¼ºå¤±çš„ draft å±æ€§
```bash
python3 .utils/251109-add-draft-properties.py
```

### è¾“å‡ºè§£è¯»

```
âœ… Created      - åˆ›å»ºäº†æ–° frontmatter
ğŸ”„ Updated      - æ·»åŠ æˆ–ä¿®æ”¹äº† draft å±æ€§
â­ï¸  Skipped      - å·²æœ‰ draftï¼ˆæœªä½¿ç”¨ --forceï¼‰
âŒ Errors       - å¤„ç†å‡ºé”™çš„æ–‡ä»¶æ•°
```

## é»‘æ›œçŸ³æŸ¥è¯¢åŠŸèƒ½ TODO

## æ—¥è®°å¯¼èˆª

## å‘å¸ƒåŠ©æ‰‹

å¤„ç†å‰¯æœ¬åˆ°å„ä¸ªå¹³å°

## è¿ç§»åŠ©æ‰‹

ä¸»è¦å¤„ç†å†å²åŒ…è¢±æ•°æ®ï¼Œç»Ÿä¸€è½¬åŒ–ä¸ºå¯è¯»æ€§æ›´å¥½çš„ Markdown æ–‡ä»¶
